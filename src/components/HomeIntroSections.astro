---
// src/components/HomeIntroSections.astro

const videoUrlPlaceholder = 'https://comercial-media.s3.amazonaws.com/ClarisConnectShort7.mp4';

// Data for key services presentation
// TODO: Update links as product pages are created/renamed
// TODO: Replace videoUrlPlaceholder with specific video URLs for each service
const services = [
  { 
    name: "Modern Web Design", 
    description: "We create your window to the digital world: fast, attractive, and functional.", 
    link: "/services/web-design", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
  { 
    name: "Bespoke Apps (Claris FileMaker)", 
    description: "ERP systems, GRC, and more, designed exclusively for your needs.", 
    link: "/services/custom-application-development", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
  { 
    name: "Intelligent Integrations", 
    description: "We connect your tools so your data works for you.", 
    link: "/services/systems-integration", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
  { 
    name: "Learning Platforms (Moodle)", 
    description: "Train your team dynamically and effectively.", 
    link: "/services/learning-platforms", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
  { 
    name: "Advanced Data Visualisation", 
    description: "We transform numbers into clear decisions.", 
    link: "/services/data-visualisation", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
  { 
    name: "Artificial Intelligence for Businesses", 
    description: "Secure, local AI to boost your business.", 
    link: "/services/artificial-intelligence", // UPDATED
    videoUrl: videoUrlPlaceholder 
  },
];
---

{/* ****** KEY SERVICES SECTION (NOW FIRST AND WITH VIDEOS) ****** */}
<section class="services-overview-section">
  <div class="container">
    <h2>Our Key Services</h2>
    <div class="services-grid">
      {services.map(service => (
        <a href={service.link} class="service-card">
          <div class="service-video-area">
            {service.videoUrl ? (
              <video autoplay loop muted playsinline preload="metadata">
                <source src={service.videoUrl} type="video/mp4" />
                Your browser does not support the video tag.
              </video>
            ) : (
              <div class="video-placeholder">Video not available</div>
            )}
          </div>
          <div class="service-content">
            <h3>{service.name}</h3>
            <p>{service.description}</p>
            <span class="learn-more">Learn more â†’</span>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>

{/* ****** PROBLEM/SOLUTION SECTION (NOW SECOND) ****** */}
<section class="problem-solution-section utility-belt-bg">
  <div class="container">
    <h2>Are you facing these technology challenges?</h2>
    <div class="problem-blocks">
      <div class="problem-block">
        <p class="question">Feeling overwhelmed by technology?</p>
        <p class="answer">"We guide you step by step."</p>
      </div>
      <div class="problem-block">
        <p class="question">Do your systems not communicate with each other?</p>
        <p class="answer">"We build information bridges."</p>
      </div>
      <div class="problem-block">
        <p class="question">Need an application that truly fits your way of working?</p>
        <p class="answer">"We design it with you."</p>
      </div>
    </div>
  </div>
</section>

<style>
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  /* Services Overview Section */
  .services-overview-section {
    padding: 4rem 1rem;
    text-align: center;
    background-color: #fff; /* White background for this section */
  }

  .services-overview-section h2 {
    font-size: 2.5rem;
    margin-bottom: 2.5rem;
    color: #333;
  }

  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); /* Minmax adjustment for wider cards */
    gap: 2rem;
  }

  .service-card {
    background-color: #f8f9fa; /* Very light grey for the card */
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.07);
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* So video doesn't overflow rounded borders */
  }

  .service-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
  }

 /* Styles for the video area in the service card */
  .service-video-area {
    width: 100%;
    position: relative;
    background-color: #e0e0e0; /* Background colour while video loads */
    /* Force ~2:1 aspect ratio for videos (more panoramic) */
    padding-bottom: 50%; /* (1 / 2 * 100) = 50%. You can try 42.55% for ~2.35:1 if needed */
    height: 0;
    overflow: hidden; /* Hide parts of video that don't fit */
    /* Optional: Add max-height if padding-bottom isn't enough control */
    /* max-height: 200px; */ /* Uncomment and adjust this value if needed */
  }

  .service-video-area video,
  .service-video-area .video-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; /* So video covers the area without distortion */
  }
  
  .video-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 0.9rem;
  }

  .service-content {
    padding: 1.5rem;
    text-align: left;
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* So this part grows and pushes "learn more" down */
  }

  .service-card h3 {
    font-size: 1.4rem;
    margin-top: 0; /* Remove top margin if video is above */
    margin-bottom: 0.75rem;
    color: #333;
  }

  .service-card p {
    font-size: 1rem;
    color: #555;
    line-height: 1.6;
    flex-grow: 1;
    margin-bottom: 1rem;
  }

  .learn-more {
    color: #007bff;
    font-weight: bold;
    align-self: flex-start;
    margin-top: auto; /* Pushes this element to the end of the .service-content flex container */
  }

  /* Problem Solution Section */
  .problem-solution-section {
    padding: 3.5rem 1rem; /* Padding adjustment */
    background-color: #f0f4f8; /* Very light blue-grey */
    text-align: center;
  }

  .problem-solution-section h2 {
    font-size: 2.2rem;
    margin-bottom: 2.5rem; /* Slightly more space */
    color: #2c3e50; /* Dark blue */
  }

  .problem-blocks {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem; /* Maintain gap */
  }

  .problem-block {
    background-color: #fff;
    padding: 1.5rem; /* Maintain padding */
    border-radius: 8px;
    box-shadow: 0 3px 12px rgba(44, 62, 80, 0.1); /* More subtle shadow, matching background */
    flex-basis: 300px;
    text-align: left;
    transition: transform 0.2s ease-out;
  }
  .problem-block:hover {
      transform: translateY(-3px);
  }

  .problem-block .question {
    font-weight: 600; /* Slightly more weight */
    color: #007bff;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }

  .problem-block .answer {
    font-size: 1rem;
    color: #34495e; /* Dark blueish grey */
    line-height: 1.5;
  }
</style>